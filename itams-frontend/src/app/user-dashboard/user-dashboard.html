<!-- User Dashboard - No Scroll Design -->
<div class="user-dashboard-container h-100 d-flex flex-column">
  <!-- Welcome Header -->
  <div class="welcome-header p-4 bg-gradient-primary text-white">
    <div class="row align-items-center">
      <div class="col-md-8">
        <h2 class="mb-1">Welcome back, {{ currentUser.name }}!</h2>
        <p class="mb-0 opacity-75">{{ currentUser.role }} • {{ currentUser.email }}</p>
      </div>
      <div class="col-md-4 text-end">
        <img [src]="currentUser.avatar" class="rounded-circle" width="60" height="60" alt="User Avatar">
      </div>
    </div>
  </div>

  <!-- Dashboard Stats -->
  <div class="stats-section p-4">
    <div class="row g-3">
      <div class="col-md-3">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-body text-center">
            <div class="d-flex align-items-center justify-content-center mb-2">
              <i class="fas fa-folder-open text-primary fs-2 me-2"></i>
              <span class="fs-1 fw-bold text-primary">{{ stats.totalProjects }}</span>
            </div>
            <h6 class="card-title text-muted mb-0">My Projects</h6>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-body text-center">
            <div class="d-flex align-items-center justify-content-center mb-2">
              <i class="fas fa-laptop text-success fs-2 me-2"></i>
              <span class="fs-1 fw-bold text-success">{{ stats.totalAssets }}</span>
            </div>
            <h6 class="card-title text-muted mb-0">My Assets</h6>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-body text-center">
            <div class="d-flex align-items-center justify-content-center mb-2">
              <i class="fas fa-tasks text-warning fs-2 me-2"></i>
              <span class="fs-1 fw-bold text-warning">{{ stats.pendingTasks }}</span>
            </div>
            <h6 class="card-title text-muted mb-0">Pending Tasks</h6>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-body text-center">
            <div class="d-flex align-items-center justify-content-center mb-2">
              <i class="fas fa-bell text-info fs-2 me-2"></i>
              <span class="fs-1 fw-bold text-info">{{ stats.recentActivities }}</span>
            </div>
            <h6 class="card-title text-muted mb-0">Notifications</h6>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="main-content flex-grow-1 p-4" style="overflow-y: auto;">
    <div class="row g-4">
      <!-- My Projects Section -->
      <div class="col-lg-8">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
            <h5 class="mb-0">
              <i class="fas fa-folder-open text-primary me-2"></i>My Projects
            </h5>
            <a routerLink="/user/projects" class="btn btn-sm btn-outline-primary">
              View All <i class="fas fa-arrow-right ms-1"></i>
            </a>
          </div>
          <div class="card-body">
            <div *ngIf="loading" class="text-center py-4">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
            
            <div *ngIf="!loading && myProjects.length === 0" class="text-center py-4 text-muted">
              <i class="fas fa-folder-open fs-1 mb-3 opacity-50"></i>
              <p>No projects assigned yet</p>
            </div>

            <div *ngIf="!loading && myProjects.length > 0">
              <div class="project-item border-bottom py-3" *ngFor="let project of myProjects; let last = last" [class.border-bottom-0]="last">
                <div class="row align-items-center">
                  <div class="col-md-6">
                    <h6 class="mb-1">{{ project.name }}</h6>
                    <small class="text-muted">{{ project.code }} • {{ project.role }}</small>
                  </div>
                  <div class="col-md-3">
                    <div class="progress" style="height: 8px;">
                      <div class="progress-bar" 
                           [class]="'bg-' + getProgressColor(project.progress)"
                           [style.width.%]="project.progress">
                      </div>
                    </div>
                    <small class="text-muted">{{ project.progress }}% Complete</small>
                  </div>
                  <div class="col-md-3 text-end">
                    <span class="badge" [class]="getStatusBadgeClass(project.status)">{{ project.status }}</span>
                    <br>
                    <small class="text-muted">Due: {{ project.dueDate }}</small>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Activities Section -->
      <div class="col-lg-4">
        <div class="card border-0 shadow-sm h-100">
          <div class="card-header bg-white border-0">
            <h5 class="mb-0">
              <i class="fas fa-bell text-info me-2"></i>Recent Activities
            </h5>
          </div>
          <div class="card-body" style="max-height: 400px; overflow-y: auto;">
            <div *ngIf="loading" class="text-center py-4">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>

            <div *ngIf="!loading && recentActivities.length === 0" class="text-center py-4 text-muted">
              <i class="fas fa-bell-slash fs-1 mb-3 opacity-50"></i>
              <p>No recent activities</p>
            </div>

            <div *ngIf="!loading && recentActivities.length > 0">
              <div class="activity-item d-flex align-items-start mb-3" *ngFor="let activity of recentActivities; let last = last" [class.mb-0]="last">
                <div class="activity-icon me-3 mt-1">
                  <i [class]="getActivityIcon(activity.type)"></i>
                </div>
                <div class="activity-content flex-grow-1">
                  <h6 class="mb-1 fs-6">{{ activity.action }}</h6>
                  <p class="mb-1 text-muted small">{{ activity.description }}</p>
                  <small class="text-muted">{{ activity.timestamp }}</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- My Assets Section -->
    <div class="row g-4 mt-2">
      <div class="col-12">
        <div class="card border-0 shadow-sm">
          <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
            <h5 class="mb-0">
              <i class="fas fa-laptop text-success me-2"></i>My Assets
            </h5>
            <div class="d-flex gap-2">
              <button class="btn btn-sm btn-outline-success">
                <i class="fas fa-plus me-1"></i>Request Asset
              </button>
              <a routerLink="/user/assets" class="btn btn-sm btn-outline-primary">
                View All <i class="fas fa-arrow-right ms-1"></i>
              </a>
            </div>
          </div>
          <div class="card-body">
            <div *ngIf="loading" class="text-center py-4">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>

            <div *ngIf="!loading && myAssets.length === 0" class="text-center py-4 text-muted">
              <i class="fas fa-laptop fs-1 mb-3 opacity-50"></i>
              <p>No assets assigned yet</p>
              <button class="btn btn-primary">Request Your First Asset</button>
            </div>

            <div *ngIf="!loading && myAssets.length > 0" class="table-responsive">
              <table class="table table-hover">
                <thead class="table-light">
                  <tr>
                    <th>Asset Name</th>
                    <th>Asset Code</th>
                    <th>Category</th>
                    <th>Status</th>
                    <th>Assigned Date</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let asset of myAssets">
                    <td>
                      <strong>{{ asset.name }}</strong>
                    </td>
                    <td>
                      <code class="text-primary">{{ asset.code }}</code>
                    </td>
                    <td>{{ asset.category }}</td>
                    <td>
                      <span class="badge" [class]="getStatusBadgeClass(asset.status)">{{ asset.status }}</span>
                    </td>
                    <td>{{ asset.assignedDate }}</td>
                    <td>
                      <div class="btn-group btn-group-sm">
                        <button class="btn btn-outline-primary" title="View Details">
                          <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-outline-warning" title="Report Issue">
                          <i class="fas fa-exclamation-triangle"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>